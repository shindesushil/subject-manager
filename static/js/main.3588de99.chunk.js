(this["webpackJsonpsubject-notes"]=this["webpackJsonpsubject-notes"]||[]).push([[0],{70:function(t,e,c){},75:function(t,e,c){},82:function(t,e,c){"use strict";c.r(e);var n=c(2),a=c(21),o=c.n(a),i=(c(70),c(22)),r=c(100),s=c(111),u=Object(s.a)({bar:{padding:"5px",background:"#266bff",boxShadow:"none"},button:{position:"absolute",right:"10px",color:"#fff",boxShadow:"0px 0px 3px #fff"},head:{fontSize:"25px"},formContainer:{position:"absolute",bottom:"0px",width:"95%",padding:"10px",background:"#d6e6ff"},form:{width:"100%"},inputfield:{width:"100%","&::placeholder":{color:"#fff"}},addBtn:{background:"#266bff",color:"#fff",marginTop:"10px","&:hover":{background:"#003c99"}},closeBtn:{marginLeft:"90%",padding:"5px",borderRadius:"inherit","&:hover":{background:"#fff"}},listItem:{width:"100%",fontSize:"16px",borderBottom:"1px solid #f0f0f0",padding:"20px"},editDelete:{position:"absolute",right:"10px"},icon:{"&:hover":{background:"transparent",color:"#266bff"}},waitMessage:{color:"#c7c7c7",fontSize:"16px",display:"flex",alignItems:"center",justifyContent:"center"},container:{height:"100vh",width:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"30px",background:"transparent",opacity:"1"}}),l=c(4),d=function(){var t=u();return Object(l.jsxs)("div",{className:t.container,children:[Object(l.jsx)(r.a,{color:"primary"}),Object(l.jsx)("h2",{children:"Please Wait"})]})},p=(c(75),c(18)),j=c(37),b=c(59),O="ADD_SUBJECT",f="REMOVE_SUBJECT",h="UPDATE_SUBJECT",y="ADD_TOPIC",N="REMOVE_TOPIC",I="UPDATE_TOPIC",D="ADD_NOTE",g="REMOVE_NOTE",m="UPDATE_NOTE",v="FETCHING_DATA",x="FETCHED_DATA",E="FETCH_DATA_ERROR",T="SET_ACTIVE_SUBJECT",S="SET_ACTIVE_TOPIC",_={isDataFetching:!1,error:"",data:[]},A=function(t,e,c){return{isDataFetching:t,error:e,data:c,isOperationGoingOn:!1}},R=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case v:return A(!0,"",[]);case x:return A(!1,"",e.payload);case E:return A(!1,e.payload,[]);case O:var c=t;return c.data.push({id:e.payload.id,name:e.payload.name,topics:[]}),c;case f:var n=t;return n.data=n.data.filter((function(t){return t.id!==e.payload})),n;case h:var a=t,o=a.data.filter((function(t){return t.id===e.payload.id}));return a.data=a.data.filter((function(t){return t.id!==e.payload.id})),o.name=e.payload.name,a.data.push(o),a;case y:var i=t,r=i.data.filter((function(t){return t.id===e.payload.subjectID}));console.log("Target Subject : ",r),r[0].topics.push({id:e.payload.topicID,name:e.payload.topicName,notes:[]});var s=i;return s.data=i.data.map((function(t){return t.id===e.payload.subjectID?r[0]:t})),s;case N:var u=t,l=u.data.filter((function(t){return t.id===e.payload.subjectID}));u.data=u.data.filter((function(t){return t.id!==e.payload.subjectID})),l[0].topics=l[0].topics.filter((function(t){return t.id!==e.payload.topicID})),console.log("Target Subject : ",l);var d=u;return d.data.push(l[0]),d;case I:var p=t,j=p.data.filter((function(t){return t.id===e.payload.subjectID}));p.data=p.data.filter((function(t){return t.id!==e.payload.subjectID}));var b=j[0].topics.filter((function(t){return t.id===e.payload.topicID}))[0];j[0].topics=j[0].topics.filter((function(t){return t.id!==e.payload.topicID})),b.name=e.payload.topicName,j[0].topics.push(b),console.log("Target Subject : ",j);var T=p;return T.data.push(j[0]),T;case D:var S=t,R=S.data.filter((function(t){return t.id===e.payload.subjectID}))[0];S.data=S.data.filter((function(t){return t.id!==e.payload.subjectID}));var C=R.topics.filter((function(t){return t.id===e.payload.topicID}))[0];R.topics=R.topics.filter((function(t){return t.id!==e.payload.topicID}));var P={id:e.payload.id,noteData:e.payload.noteData};return C.notes.push(P),R.topics.push(C),S.data.push(R),S;case g:var k=t,G=k.data.filter((function(t){return t.id===e.payload.subjectID}))[0];k.data=k.data.filter((function(t){return t.id!==e.payload.subjectID}));var w=G.topics.filter((function(t){return t.id===e.payload.topicID}))[0];return G.topics=G.topics.filter((function(t){return t.id!==e.payload.topicID})),w.notes=w.notes.filter((function(t){return t.id!==e.payload.noteID})),console.log("Delete note subject : ",G),G.topics.push(w),k.data.push(G),k;case m:var B=t,U=B.data.filter((function(t){return t.id===e.payload.subjectID}))[0];B.data=B.data.filter((function(t){return t.id!==e.payload.subjectID}));var F=U.topics.filter((function(t){return t.id===e.payload.topicID}))[0];U.topics=U.topics.filter((function(t){return t.id!==e.payload.topicID})),F.notes=F.notes.filter((function(t){return t.id!==e.payload.noteID}));var M={id:e.payload.noteID,noteData:e.payload.noteData};return F.notes.push(M),console.log("Delete note subject : ",U),U.topics.push(F),B.data.push(U),B;default:return t}},C={activeSubject:"",activeTopic:"",isOperationGoingOn:!1},P=function(t,e,c){return{activeSubject:t,activeTopic:e,isOperationGoingOn:c}},k=c(60);console.log(R);var G=Object(k.composeWithDevTools)({}),w=Object(j.combineReducers)({subjects:R,uireducer:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case T:return P(e.payload,"",t.isOperationGoingOn);case S:return P(t.activeSubject,e.payload,t.isOperationGoingOn);case"RESET_UI":return P("","",t.isOperationGoingOn);case"RESET_NOTES":return P(t.activeSubject,"",t.isOperationGoingOn);case"OPERATION_GOING_ON":return console.log("State i operation goin on :",t),{activeSubject:t.activeSubject,activeTopic:t.activeTopic,isOperationGoingOn:!0};case"OPERATION_DONE":return console.log("State in operation done : ",t),{activeSubject:t.activeSubject,activeTopic:t.activeTopic,isOperationGoingOn:!1};default:return t}}});console.log("Reducer in store : ",R);var B=Object(j.createStore)(w,G(Object(j.applyMiddleware)(b.a))),U=c(49);U.a.initializeApp({apiKey:"AIzaSyBnREZw8NbVALl7s8kAoIvhlvfUhgZdct0",authDomain:"subject-manager-aa0ba.firebaseapp.com",projectId:"subject-manager-aa0ba",storageBucket:"subject-manager-aa0ba.appspot.com",messagingSenderId:"421051326574",appId:"1:421051326574:web:b4d420146ff0836d2c467f"});var F=U.a,M=function(){return console.log("IN fetch all subjects"),function(t){console.log("in thunk"),t({type:v,payload:""});var e=[],c=F.firestore();return c.collection("subjects").get().then((function(n){n.forEach((function(t){var n=t.id,a=t.data().name,o=[];c.collection("subjects").doc(n).collection("Topics").get().then((function(t){t.forEach((function(t){var e=t.id,a=t.data().name,i=[];c.collection("subjects").doc(n).collection("Topics").doc(e).collection("Notes").get().then((function(t){t.forEach((function(t){var e={id:t.id,noteData:t.data().note};i.push(e)}))})).catch((function(t){console.log("Error in notes : ",t)}));var r={id:e,name:a,notes:i};o.push(r)}))})).catch((function(t){console.log("Error in topics : ",t)}));var i={id:n,name:a,topics:o};e.push(i)})),console.log(e),t({type:x,payload:e})})).catch((function(e){console.log("Error in subjects : ",e),t(function(t){return{type:E,payload:t}}(e))}))}},J=c(48),V=c.n(J),z=c(61),L=function(t){return console.log("In subject controller : ",t),function(e){return e({type:"OPERATION_GOING_ON",payload:""}),console.log("in subject thunk"),F.firestore().collection("subjects").add({name:t}).then((function(c){var n;console.log("DOC Ref : ",c),e((n={id:c.id,name:t},{type:O,payload:n})),console.log("dispatch in then"),e({type:"OPERATION_DONE",payload:""})})).catch((function(t){console.log("Error: ",t),console.log("dispatch in catch"),e({type:"OPERATION_DONE",payload:""})}))}},H=function(t){return function(e){return e({type:"OPERATION_GOING_ON",payload:""}),F.firestore().collection("subjects").doc(t).delete().then((function(c){e({type:f,payload:t}),e({type:"RESET_UI",payload:""}),e({type:"OPERATION_DONE",payload:""})})).catch((function(t){console.log("Error while deleting subject : ",t),e({type:"RESET_UI",payload:""}),e({type:"OPERATION_DONE",payload:""})}))}},W=c(114),Z=c(101),K=c(102),Y=c(104),q=c(105),Q=c(106),X=c(112),$=c(110),tt=c(113),et=c(83),ct=c(103),nt=c(107),at=c(108),ot=c(109),it=Object(i.b)((function(t){return{subjects:t.subjects,uireducer:t.uireducer}}),(function(t){return{fetch:function(){return t(M())},getTopics:function(e){return t(function(t){return{type:T,payload:t}}(e))},addSubject:function(e){return t(L(e))},removeSubject:function(e){return t(H(e))},updateSubject:function(e){return t(function(t){return console.log("state in modify 1 : ",B.getState()),function(){var e=Object(z.a)(V.a.mark((function e(c){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c({type:"OPERATION_GOING_ON",payload:""}),F.firestore().collection("subjects").doc(t.id).set({name:t.name}).then((function(e){var n;c((n={id:t.id,name:t.name},{type:h,payload:n})),c({type:"OPERATION_DONE",payload:""})})).catch((function(t){console.log("Error while updating subject : ",t),c({type:"OPERATION_DONE",payload:""})}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}(e))}}}))((function(t){var e=t.subjects,c=t.uireducer,a=t.fetch,o=t.getTopics,i=t.addSubject,r=t.removeSubject,s=t.updateSubject,d=u(),j=Object(n.useState)(""),b=Object(p.a)(j,2),O=b[0],f=b[1],h=Object(n.useState)(!1),y=Object(p.a)(h,2),N=y[0],I=y[1],D=Object(n.useState)(!1),g=Object(p.a)(D,2),m=g[0],v=g[1],x=Object(n.useState)(""),E=Object(p.a)(x,2),T=E[0],S=E[1];return Object(n.useEffect)((function(){console.log("In use effect"),a()}),[]),Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(W.a,{position:"static",children:Object(l.jsxs)(Z.a,{children:[Object(l.jsx)("p",{className:d.head,children:"Subjects"}),Object(l.jsx)(K.a,{className:d.button,onClick:function(){I(!0),f("")},children:Object(l.jsx)(ct.a,{})})]})}),c.isOperationGoingOn?Object(l.jsx)("h1",{children:"Please Wait"}):"",Object(l.jsx)(Y.a,{children:!e.isDataFetching&&e.data?e.data.map((function(t){return Object(l.jsxs)(q.a,{button:!0,className:d.listItem,id:t.id,onClick:function(){return o(t.id)},children:[t.name,Object(l.jsxs)(Q.a,{className:d.editDelete,children:[Object(l.jsx)(K.a,{className:d.icon,onClick:function(){var e;e=t.id,S(e),v(!0),f(""),f(t.name)},children:Object(l.jsx)(nt.a,{})}),Object(l.jsx)(K.a,{className:d.icon,onClick:function(){return r(t.id)},children:Object(l.jsx)(at.a,{})})]})]},t.id)})):Object(l.jsx)("div",{className:d.waitMessage,children:Object(l.jsx)("p",{children:"Fetching Subjects"})})}),Object(l.jsx)(X.a,{in:N||m,children:Object(l.jsxs)("div",{className:d.formContainer,children:[Object(l.jsx)(K.a,{className:d.closeBtn,onClick:function(){I(!1),v(!1)},children:Object(l.jsx)(ot.a,{})}),Object(l.jsxs)($.a,{className:d.form,children:[Object(l.jsx)(tt.a,{value:O,onChange:function(t){return f(t.target.value)},placeholder:N?"Add Subject":"Update Subject",className:d.inputfield}),N?Object(l.jsx)(et.a,{className:d.addBtn,onClick:function(){return i(O)},children:"Add"}):Object(l.jsx)(et.a,{className:d.addBtn,onClick:function(){return s({id:T,name:O})},children:"Update"})]})]})})]})})),rt=function(t,e){return function(c){return c({type:"OPERATION_GOING_ON",payload:""}),F.firestore().collection("subjects").doc(t).collection("Topics").add({name:e}).then((function(n){c({type:y,payload:{subjectID:t,topicName:e}}),c({type:"OPERATION_DONE",payload:""})})).catch((function(t){console.log("Error ocured while inserting topic: ",t),c({type:"OPERATION_DONE",payload:""})}))}},st=function(t,e){return function(c){return c({type:"OPERATION_GOING_ON",payload:""}),F.firestore().collection("subjects").doc(t).collection("Topics").doc(e).delete().then((function(n){c({type:N,payload:{subjectID:t,topicID:e}}),c({type:"RESET_UI",payload:""}),c({type:"OPERATION_DONE",payload:""})})).catch((function(t){console.log("Error ocured while deleting topic: ",t),c({type:"RESET_UI",payload:""}),c({type:"OPERATION_DONE",payload:""})}))}},ut=function(t){return function(e){return e({type:"OPERATION_GOING_ON",payload:""}),F.firestore().collection("subjects").doc(t.subjectID).collection("Topics").doc(t.topicID).set({name:t.topicName}).then((function(c){var n;e((n={subjectID:t.subjectID,topicID:t.topicID,topicName:t.topicName},{type:I,payload:n})),e({type:"OPERATION_DONE",payload:""})})).catch((function(t){console.log("Error ocured while updating topic: ",t),e({type:"OPERATION_DONE",payload:""})}))}},lt=Object(i.b)((function(t){return{uireducer:t.uireducer,data:t.subjects.data}}),(function(t){return{getNotes:function(e){return t(function(t){return{type:S,payload:t}}(e))},addTopic:function(e,c){return t(rt(e,c))},removeTopic:function(e,c){return t(st(e,c))},updateTopic:function(e,c,n){return t(ut({subjectID:e,topicID:c,topicName:n}))}}}))((function(t){var e=t.uireducer,c=t.data,a=t.getNotes,o=t.addTopic,i=t.removeTopic,r=t.updateTopic,s=u(),d=Object(n.useState)(!1),j=Object(p.a)(d,2),b=j[0],O=j[1],f=Object(n.useState)(!1),h=Object(p.a)(f,2),y=h[0],N=h[1],I=Object(n.useState)(""),D=Object(p.a)(I,2),g=D[0],m=D[1],v=Object(n.useState)([]),x=Object(p.a)(v,2),E=x[0],T=x[1];return Object(n.useEffect)((function(){T([]),console.log("Active Subject : ",e.activeSubject),e.activeSubject&&(console.log("Data : ",c.filter((function(t){return t.id===e.activeSubject}))[0].topics),T(c.filter((function(t){return t.id===e.activeSubject}))[0].topics)),console.log("State in topics : ",B.getState())}),[e.activeSubject,c]),Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(W.a,{position:"static",children:Object(l.jsxs)(Z.a,{children:[Object(l.jsx)("p",{className:s.head,children:"Topics"}),Object(l.jsx)(K.a,{className:s.button,onClick:function(){O(!0),m("")},children:Object(l.jsx)(ct.a,{})})]})}),e.isOperationGoingOn?"Please wait":e.isOperationGoingOn,Object(l.jsx)(Y.a,{children:E.length>0?E.map((function(t){return Object(l.jsxs)(q.a,{button:!0,className:s.listItem,onClick:function(){return a(t.id)},children:[t.name,Object(l.jsxs)(Q.a,{className:s.editDelete,children:[Object(l.jsx)(K.a,{className:s.icon,onClick:function(){N(!0),m(t.name),O(!1),O(!1)},children:Object(l.jsx)(nt.a,{})}),Object(l.jsx)(K.a,{className:s.icon,onClick:function(){return i(e.activeSubject,t.id)},children:Object(l.jsx)(at.a,{})})]})]},t.id)})):e.activeSubject?Object(l.jsx)("div",{className:s.waitMessage,children:Object(l.jsx)("p",{children:"No topics yet"})}):Object(l.jsx)("div",{className:s.waitMessage,children:Object(l.jsx)("p",{children:"Select subject to see topics"})})}),Object(l.jsx)(X.a,{in:b||y,children:Object(l.jsxs)("div",{className:s.formContainer,children:[Object(l.jsx)(K.a,{className:s.closeBtn,onClick:function(){O(!1),N(!1)},children:Object(l.jsx)(ot.a,{})}),Object(l.jsxs)($.a,{className:s.form,children:[Object(l.jsx)(tt.a,{placeholder:b?"Add Topic":"Update Topic",className:s.inputfield,value:g,onChange:function(t){return m(t.target.value)}}),b?Object(l.jsx)(et.a,{className:s.addBtn,onClick:function(){return o(e.activeSubject,g)},children:"Add"}):Object(l.jsx)(et.a,{className:s.addBtn,onClick:function(){return r(e.activeSubject,e.activeTopic,g)},children:"Update"})]})]})})]})})),dt=function(t){return function(e){return e({type:"OPERATION_GOING_ON",payload:""}),F.firestore().collection("subjects").doc(t.subjectID).collection("Topics").doc(t.topicID).collection("Notes").add({note:t.noteData}).then((function(c){var n;e((n={id:c.id,subjectID:t.subjectID,topicID:t.topicID,noteData:t.noteData},{type:D,payload:n})),e({type:"OPERATION_DONE",payload:""})})).catch((function(t){console.log("Error occured while inserting note : ",t),e({type:"OPERATION_DONE",payload:""})}))}},pt=function(t){return function(e){return e({type:"OPERATION_GOING_ON",payload:""}),F.firestore().collection("subjects").doc(t.subjectID).collection("Topics").doc(t.topicID).collection("Notes").doc(t.noteID).delete().then((function(c){var n;e((n={subjectID:t.subjectID,topicID:t.topicID,noteID:t.noteID},{type:g,payload:n})),e({type:"RESET_NOTES",payload:""}),e({type:"OPERATION_DONE",payload:""})})).catch((function(t){console.log("Error occured while deleting note : ",t),e({type:"RESET_UI",payload:""}),e({type:"OPERATION_DONE",payload:""})}))}},jt=function(t){return function(e){return e({type:"OPERATION_GOING_ON",payload:""}),F.firestore().collection("subjects").doc(t.subjectID).collection("Topics").doc(t.topicID).collection("Notes").doc(t.noteID).set({note:t.noteData}).then((function(c){var n;e((n={subjectID:t.subjectID,topicID:t.topicID,noteID:t.noteID,noteData:t.noteData},{type:m,payload:n})),e({type:"OPERATION_DONE",payload:""})})).catch((function(t){console.log("Error occured while updating note : ",t),e({type:"OPERATION_DONE",payload:""})}))}},bt=Object(i.b)((function(t){return{uireducer:t.uireducer,data:t.subjects.data}}),(function(t){return{addNote:function(e,c,n){return t(dt({subjectID:e,topicID:c,noteData:n}))},removeNote:function(e,c,n){return t(pt({subjectID:e,topicID:c,noteID:n}))},updateNote:function(e,c,n,a){return t(jt({subjectID:e,topicID:c,noteID:n,noteData:a}))}}}))((function(t){var e=t.uireducer,c=t.data,a=t.addNote,o=t.removeNote,i=t.updateNote,r=u(),s=Object(n.useState)([]),d=Object(p.a)(s,2),j=d[0],b=d[1],O=Object(n.useState)(!1),f=Object(p.a)(O,2),h=f[0],y=f[1],N=Object(n.useState)(!1),I=Object(p.a)(N,2),D=I[0],g=I[1],m=Object(n.useState)(""),v=Object(p.a)(m,2),x=v[0],E=v[1],T=Object(n.useState)(""),S=Object(p.a)(T,2),_=S[0],A=S[1];return Object(n.useEffect)((function(){b([]),E(""),e.activeTopic&&b(c.filter((function(t){return t.id===e.activeSubject}))[0].topics.filter((function(t){return t.id===e.activeTopic}))[0].notes)}),[e.activeTopic,c]),Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(W.a,{position:"static",children:Object(l.jsxs)(Z.a,{children:[Object(l.jsx)("p",{className:r.head,children:"Notes"}),Object(l.jsx)(K.a,{className:r.button,onClick:function(){y(!0),A("")},children:Object(l.jsx)(ct.a,{})})]})}),Object(l.jsx)(Y.a,{children:j.length>0?j.map((function(t){return Object(l.jsxs)(q.a,{button:!0,className:r.listItem,id:t.id,children:[t.noteData,Object(l.jsxs)(Q.a,{className:r.editDelete,children:[Object(l.jsx)(K.a,{className:r.icon,onClick:function(){g(!0),E(t.id),A(t.noteData),y(!1)},children:Object(l.jsx)(nt.a,{})}),Object(l.jsx)(K.a,{className:r.icon,onClick:function(){return o(e.activeSubject,e.activeTopic,t.id)},children:Object(l.jsx)(at.a,{})})]})]},t.id)})):e.activeTopic?Object(l.jsx)("div",{className:r.waitMessage,children:Object(l.jsx)("p",{children:"No notes Yet"})}):Object(l.jsx)("div",{className:r.waitMessage,children:Object(l.jsx)("p",{children:"Select topic to see notes"})})}),Object(l.jsx)(X.a,{in:h||D,children:Object(l.jsxs)("div",{className:r.formContainer,children:[Object(l.jsx)(K.a,{className:r.closeBtn,onClick:function(){y(!1),g(!1)},children:Object(l.jsx)(ot.a,{})}),Object(l.jsxs)($.a,{className:r.form,children:[Object(l.jsx)(tt.a,{placeholder:h?"Add Note":"Update Note",className:r.inputfield,value:_,onChange:function(t){return A(t.target.value)}}),h?Object(l.jsx)(et.a,{className:r.addBtn,onClick:function(){return a(e.activeSubject,e.activeTopic,_)},children:"Add"}):Object(l.jsx)(et.a,{className:r.addBtn,onClick:function(){return i(e.activeSubject,e.activeTopic,x,_)},children:"Update"})]})]})})]})})),Ot=Object(i.b)((function(t){return{uireducer:t.uireducer}}),(function(t){return{}}))((function(t){var e=t.uireducer;return Object(l.jsxs)(l.Fragment,{children:[e.isOperationGoingOn?Object(l.jsx)("div",{children:Object(l.jsx)(d,{})}):"",Object(l.jsxs)("div",{className:"container",children:[Object(l.jsx)("div",{className:"section",children:Object(l.jsx)(it,{})}),Object(l.jsx)("div",{className:"section",children:Object(l.jsx)(lt,{})}),Object(l.jsx)("div",{className:"section",children:Object(l.jsx)(bt,{})})]})]})})),ft=function(){return Object(l.jsx)(i.a,{store:B,children:Object(l.jsx)(Ot,{})})},ht=function(t){t&&t instanceof Function&&c.e(3).then(c.bind(null,116)).then((function(e){var c=e.getCLS,n=e.getFID,a=e.getFCP,o=e.getLCP,i=e.getTTFB;c(t),n(t),a(t),o(t),i(t)}))};o.a.render(Object(l.jsx)(ft,{}),document.getElementById("root")),ht()}},[[82,1,2]]]);
//# sourceMappingURL=main.3588de99.chunk.js.map